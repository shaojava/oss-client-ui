<!doctype html>
<html class="no-js" ng-app="ossClientUiApp" prevent-drag-drop>
<head>
    <meta charset="utf-8">
    <title>OSS</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <!-- build:css(bower_components) styles/vendor.css -->
    <!-- bower:css -->
    <link rel="stylesheet" href="../bower_components/font-awesome/css/font-awesome.css" />
    <link rel="stylesheet" href="../bower_components/angular-ui-select/dist/select.css" />
    <!-- endbower -->
    <!-- endbuild -->
    <!-- build:css(.tmp) styles/main.css -->
    <link rel="stylesheet" href="styles/main.css">
    <!-- endbuild -->
</head>
<body ng-controller="MainCtrl" id="index-page">
<div class="wrapper" ng-show="bucketsLoaded">
    <div class="left-sidebar" ng-class="{'has-current-locaiton':currentLocation}">
        <div class="left-header">
            <h1><img src="images/oss_logo_small.png" alt=""/></h1>
            <button title="创建Bucket" class="fa fa-plus add-bucket" ng-click="showAddBucketModal()"></button>
            <button class="fa fa-cog fa-lg export-auth" ng-click="exportAuthorization()" title="设置"></button>
        </div>
        <ul class="scrollbar dark bucket-list" scroll-to-item="{{scrollToIndex}}" item-selector=".bucket-item">
            <li class="bucket-item" ng-repeat="bucket in buckets" dropdown title="{{bucket.Name}}" context-menu="onConextMenuShow(bucket)" data-target="bucket-menu">
                <a href="#{{bucket.Name|getLocation}}" ng-class="{'selected':bucket.selected}">
                    <span ng-bind="bucket.Name"></span>
                    <span class="show-menu" dropdown-toggle>
                        <i class="fa fa-caret-down fa-caret-lg"></i>
                    </span>
                </a>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="javascript:;" ng-click="editBucket(bucket)">属性管理</a></li>
                    <li><a href="javascript:;" ng-click="manageBucketPartition(bucket)">碎片管理</a></li>
                </ul>
            </li>
        </ul>
        <div class="left-footer" ng-if="currentLocation">
            <span>当前区域：</span>
            <span ng-bind="currentLocation | getLocationName" class="text-primary"></span>
        </div>
        <div class="dropdown position-fixed" id="bucket-menu">
            <ul class="dropdown-menu" role="menu">
                <li><a href="javascript:;" ng-click="editBucket(activeBucket)">属性管理</a></li>
                <li><a href="javascript:;" ng-click="manageBucketPartition(activeBucket)">碎片管理</a></li>
            </ul>
        </div>
    </div>
    <div class="main" ng-class="{'show-trans-queue':showTransQueue}" ng-show="buckets && buckets.length">
        <div class="search-wrapper">
            <input name="keyword" id="keyword" ng-model="keyword" autocomplete="off" smart-search/>
            <a href="javascript:;" class="fa fa-search fa-lg"></a>
        </div>
        <div class="bread">
            <div class="history">
                <button class="backward" ng-disabled="!historyCanBackward" ng-click="backward()">
                    <i class="fa fa-angle-left"></i>
                </button>
                <button class="forward" ng-disabled="!historyCanForward" ng-click="forward()">
                    <i class="fa fa-angle-right"></i>
                </button>
            </div>
            <ul class="bread-list" >
                <li ng-repeat="bread in breads" class="bread-item">
                    <a ng-bind="bread.name" href="#{{bread.url}}"></a>
                </li>
            </ul>
        </div>

        <div class="file-browser" ng-view>

        </div>
        <div class="trans-queue" ng-controller="TransQueueCtrl" ng-dblclick="handleTransQueueDblClick($event)">
            <div class="total-speed-wrapper">
                <span>上传速度：<strong
                        ng-show="OSSUploadQueue.uploadSpeed>0" ><span ng-bind="OSSUploadQueue.uploadSpeed|bitSize"></span>/秒</strong><em
                        ng-show="OSSUploadQueue.uploadSpeed<=0">-</em></span>
                <span>下载速度：<strong ng-show="OSSDownloadQueue.downloadSpeed>0" ><span ng-bind="OSSDownloadQueue.downloadSpeed|bitSize"></span>/秒</strong><em
                        ng-show="OSSDownloadQueue.downloadSpeed<=0">-</em></span>
            </div>
            <a href="javascript:void(0)" class="slide_queue" ng-click="toggleSlideQueue()"><i class="fa fa-lg"
                                                                                              ng-class="{'fa-angle-double-up':!showTransQueue,'fa-angle-double-down':showTransQueue}"></i></a>
            <tabset>
                <tab heading="{{tab.name == 'upload' ? tab.title + (OSSUploadQueue.totalCount > 0 ? '(' + OSSUploadQueue.doneCount+ '/' + OSSUploadQueue.totalCount + ')':''):tab.name == 'download'?tab.title +(OSSDownloadQueue.totalCount?'(' + OSSDownloadQueue.doneCount + '/' + OSSDownloadQueue.totalCount + ')' : ''):tab.title}}" active="tab.active" ng-repeat="tab in tabs" select="selectTab(tab)">
                    <div ng-switch on="tab.name">
                        <!--上传队列Tab-->
                        <div ng-switch-when="upload">
                            <div class="opt-bar">
                                <div class="clearfix opt-list">
                                    <div class="btn-group" ng-repeat="menuGroup in uploadMenuGroup">
                                        <menu name="{{menu.name}}" ng-if="!isExcludeTopMenu(menu) && menu.getState(getSelectedList('upload'),uploadList,OSSUploadQueue.doneCount,OSSUploadQueue.totalCount)>=0" ng-repeat="menu in menuGroup" state=" menu.getState(getSelectedList('upload'),uploadList,OSSUploadQueue.doneCount,OSSUploadQueue.totalCount)" execute="menu.execute(getSelectedList('upload'),uploadList)">{{menu.text}}
                                        </menu>
                                    </div>
                                </div>
                            </div>
                            <div class="empty" ng-show="!uploadList || !uploadList.length">没有上传</div>
                            <ul class="scrollbar queue-list"
                                keyboard-nav-list="uploadList"
                                keyboard-nav-step="1"
                                keyboard-nav="{{enableUploadKeyBoardNav}}"
                                scroll-to-item = "{{scrollToUploadIndex}}"
                                item-selector=".queue-item"
                                select="select(item,'upload')"
                                un-select="unSelect(item,'upload')"
                                get-selected-list="getSelectedList('upload')"
                                scroll-load="loadMoreQueue('upload')"
                                disable-scroll="loadingQueue"
                                    >
                                <queue-item ng-click="handleItemClick($event,$index,item,'upload')" type="upload" data="item"  execute-cmd="executeUploadCmd(cmd,item)" ng-repeat="item in uploadList"></queue-item>
                            </ul>
                        </div>
                        <!--下载队列Tab-->
                        <div ng-switch-when="download">
                            <div class="opt-bar">
                                <div class="clearfix opt-list">
                                   <div class="btn-group" ng-repeat="menuGroup in downloadMenuGroup">
                                        <menu ng-repeat="menu in menuGroup" type="download" name="{{menu.name}}" ng-if="!isExcludeTopMenu(menu) && menu.getState(getSelectedList('download'),downloadList,OSSDownloadQueue.doneCount,OSSDownloadQueue.totalCount)>=0" state="menu.getState(getSelectedList('download'),downloadList,OSSDownloadQueue.doneCount,OSSDownloadQueue.totalCount)"
                                              execute="menu.execute(getSelectedList('download'),downloadList)"><span ng-bind="menu.text"></span>
                                        </menu>
                                   </div>
                                </div>
                            </div>
                            <div class="empty" ng-show="!downloadList || !downloadList.length">没有下载</div>
                            <ul class="scrollbar queue-list"
                                keyboard-nav-list="downloadList"
                                keyboard-nav-step="1"
                                keyboard-nav="{{enableDownloadKeyBoardNav}}"
                                scroll-to-item = "{{scrollToDownloadIndex}}"
                                item-selector=".queue-item"
                                select="select(item,'download')"
                                un-select="unSelect(item,'download')"
                                get-selected-list="getSelectedList('download')"
                                scroll-load="loadMoreQueue('download')"
                                disable-scroll="loadingQueue"
                                    >
                                <queue-item data="item" ng-repeat="item in downloadList" ng-click="handleItemClick($event,$index,item,'download')" execute-cmd="executeDownloadCmd(cmd,item)"></queue-item>
                            </ul>
                        </div>
                        <!--日志队列Tab-->
                        <div ng-switch-when="log">
                            <div class="opt-bar">
                                <div class="clearfix opt-list">
                                    <div class="btn-group">
                                        <menu name="openLogFolder"  state="1" execute="openLogFolder()">
                                            打开日志文件夹
                                        </menu>
                                   </div>

                                </div>
                            </div>
                            <div class="log-wrapper">
                                <div class="empty" ng-show="!errorLog">没有日志</div>
                                <textarea ng-show="errorLog" ng-model="errorLog" readonly></textarea>
                            </div>
                        </div>
                    </div>
                </tab>
            </tabset>
        </div>
    </div>
</div>
<span us-spinner="{radius:10, length: 0}"  spinner-key="body-spinner"  spinner-start-active="1"></span>
<!-- build:js(bower_components) scripts/vendor.js -->
<!-- bower:js -->
<script src="../bower_components/jquery/dist/jquery.js"></script>
<script src="../bower_components/es5-shim/es5-shim.js"></script>
<script src="../bower_components/angular/angular.js"></script>
<script src="../bower_components/json3/lib/json3.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/affix.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/alert.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/button.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/carousel.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/collapse.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/dropdown.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/tab.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/transition.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/scrollspy.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/modal.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/tooltip.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap/popover.js"></script>
<script src="../bower_components/angular-resource/angular-resource.js"></script>
<script src="../bower_components/angular-cookies/angular-cookies.js"></script>
<script src="../bower_components/angular-sanitize/angular-sanitize.js"></script>
<script src="../bower_components/angular-animate/angular-animate.js"></script>
<script src="../bower_components/angular-touch/angular-touch.js"></script>
<script src="../bower_components/angular-route/angular-route.js"></script>
<script src="../bower_components/jquery-xml2json/src/xml2json.js"></script>
<script src="../bower_components/angular-ui-bootstrap/dist/ui-bootstrap-tpls-0.11.0.js"></script>
<script src="../bower_components/angular-base64/angular-base64.js"></script>
<script src="../bower_components/cryptojslib/components/core.js"></script>
<script src="../bower_components/cryptojslib/components/enc-base64.js"></script>
<script src="../bower_components/cryptojslib/components/md5.js"></script>
<script src="../bower_components/cryptojslib/components/sha1.js"></script>
<script src="../bower_components/cryptojslib/components/hmac.js"></script>
<script src="../bower_components/util.js/util.js"></script>
<script src="../bower_components/spin.js/spin.js"></script>
<script src="../bower_components/angular-spinner/angular-spinner.js"></script>
<script src="../bower_components/underscore/underscore.js"></script>
<script src="../bower_components/ng-context-menu/dist/ng-context-menu.js"></script>
<script src="../bower_components/angular-ui-select/dist/select.js"></script>
<script src="../bower_components/angular-local-storage/dist/angular-local-storage.js"></script>
<!-- endbower -->
<!-- endbuild -->

<!-- build:js({.tmp,app}) scripts/scripts.js -->
<!--<script src="scripts/oss-client.js"></script>-->
<script src="scripts/interface.js"></script>
<script src="scripts/oss-common.js"></script>
<script src="scripts/app.js"></script>
<script src="scripts/controllers/main.js"></script>
<script src="scripts/services/service.js"></script>
<script src="scripts/filters/filter.js"></script>
<script src="scripts/directives/directive.js"></script>
<!-- endbuild -->
</body>
</html>
